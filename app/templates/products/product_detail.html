<!DOCTYPE html>
{% load static %}
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{% if product.meta_title %}{{ product.meta_title }}{% else %}{{ product.name }} Manufacturer & Supplier in India | Vasudev Chemo Pharma{% endif %}</title>

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="{% static 'media/logo.jpg' %}" />

  <!-- Meta Description -->
  <meta name="description" content="{% if product.meta_description %}{{ product.meta_description }}{% else %}{{ product.short_description|default:product.detailed_description|striptags|truncatechars:160 }}{% endif %}" />

  <!-- Keywords -->
  <meta name="keywords" content="{% if product.meta_keywords %}{{ product.meta_keywords }}{% else %}{{ product.meta_keywords }}{% endif %}" />

  <!-- Canonical -->
  <link rel="canonical" href="{{ request.build_absolute_uri }}" />

  <!-- Open Graph -->
  <meta property="og:type" content="product" />
  <meta property="og:title" content="{% if product.meta_title %}{{ product.meta_title }}{% else %}{{ product.name }} | Vasudev Chemo Pharma{% endif %}" />
  <meta property="og:description" content="{% if product.meta_description %}{{ product.meta_description }}{% else %}{{ product.short_description|default:product.detailed_description|striptags|truncatechars:160 }}{% endif %}" />
  <meta property="og:image" content="{% if product.get_direct_image_url %}{{ product.get_direct_image_url }}{% elif product.main_image %}{{ product.main_image.url }}{% else %}{% static 'media/MEA-Triazine.jpg' %}{% endif %}" />
  <meta property="og:url" content="{{ request.build_absolute_uri }}" />
  <meta property="og:site_name" content="Vasudev Chemo Pharma" />

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="{% if product.meta_title %}{{ product.meta_title }}{% else %}{{ product.name }} | Vasudev Chemo Pharma{% endif %}" />
  <meta name="twitter:description" content="{% if product.meta_description %}{{ product.meta_description }}{% else %}{{ product.short_description|default:product.detailed_description|striptags|truncatechars:160 }}{% endif %}" />
  <meta name="twitter:image" content="{% if product.get_direct_image_url %}{{ product.get_direct_image_url }}{% elif product.main_image %}{{ product.main_image.url }}{% else %}{% static 'media/MEA-Triazine.jpg' %}{% endif %}" />

  <!-- Organization Schema -->
  <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "Vasudev Chemo Pharma",
        "url": "https://vasudevchemopharma.com/",
        "logo": "https://vasudevchemopharma.com/static/media/logo.png",
        "contactPoint": [
          {
            "@type": "ContactPoint",
            "telephone": "+91-98791 28500",
            "contactType": "Sales Support",
            "areaServed": "IN",
            "availableLanguage": ["English"]
          }
        ],
        "sameAs": [
          "https://www.linkedin.com/company/vasudevchemo/",
          "https://vasudevchemopharma.com/"
        ]
      }
    </script>

  <!-- Breadcrumb Schema -->
  <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [
          {
            "@type": "ListItem",
            "position": 1,
            "name": "Home",
            "item": "https://vasudevchemopharma.com/"
          },
          {
            "@type": "ListItem",
            "position": 2,
            "name": "Products",
            "item": "https://vasudevchemopharma.com/products/"
          },
          {
            "@type": "ListItem",
            "position": 3,
            "name": "MEA Triazine 80% H₂S Scavenger",
            "item": "https://vasudevchemopharma.com/MEA-Triazine"
          }
        ]
      }
    </script>

  <!-- Product Schema (enhanced with keywords, hasPart for TDS/COA, aggregateRating sample) -->
  <script type="application/ld+json">
      {
        "@context": "https://schema.org/",
        "@type": "Product",
        "name": "{{ product.name|escapejs }}",
        "description": "{% if product.meta_description %}{{ product.meta_description|escapejs }}{% else %}{{ product.short_description|default:product.detailed_description|striptags|truncatechars:200|escapejs }}{% endif %}",
  "image": "{% if product.get_direct_image_url %}{{ product.get_direct_image_url }}{% elif product.main_image %}{{ request.scheme }}://{{ request.get_host }}{{ product.main_image.url }}{% else %}{% static 'media/MEA-Triazine.jpg' %}{% endif %}",
        "brand": { "@type": "Brand", "name": "Vasudev Chemo Pharma" },
        "manufacturer": {
          "@type": "Organization",
          "name": "Vasudev Chemo Pharma",
          "url": "{{ request.scheme }}://{{ request.get_host }}/"
        },
        "category": "{{ product.category.name|default:'' }}",
        "keywords": "{{ product.meta_keywords|default:'' }}",
        "offers": {
          "@type": "Offer",
          "url": "{{ request.build_absolute_uri }}",
          "priceCurrency": "INR",
          "availability": "https://schema.org/InStock"
        },
        "aggregateRating": {
          "@type": "AggregateRating",
          "ratingValue": "{{ product.schema_rating|default:0 }}",
          "reviewCount": "{{ product.schema_review_count|default:0 }}"
        },
        "hasPart": [
          {% if product.tds_pdf %}
          {
            "@type": "CreativeWork",
            "name": "{{ product.name }} - Technical Data Sheet (TDS)",
            "url": "{{ request.build_absolute_uri(product.tds_pdf.url) }}"
          }{% if product.coa_pdf %},{% endif %}
          {% endif %}
          {% if product.coa_pdf %}
          {
            "@type": "CreativeWork",
            "name": "{{ product.name }} - Certificate of Analysis (COA)",
            "url": "{{ request.build_absolute_uri(product.coa_pdf.url) }}"
          }
          {% endif %}
        ]
      }
    </script>

  <!-- FAQ Schema -->
  <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "FAQPage",
        "mainEntity": [
          {
            "@type": "Question",
            "name": "What is MEA Triazine used for?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "MEA Triazine is primarily used as a hydrogen sulfide (H₂S) scavenger in oil, gas, and crude processing industries to remove toxic sulfide gases."
            }
          },
          {
            "@type": "Question",
            "name": "What grades of MEA Triazine are available?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Vasudev Chemo Pharma offers MEA Triazine in 40%, 50%, 60%, and 80% concentrations customized to client requirements."
            }
          },
          {
            "@type": "Question",
            "name": "Is MEA Triazine effective for crude oil sweetening?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Yes, MEA Triazine 80% is highly effective for crude oil sweetening and refinery gas treatment due to its superior H₂S removal efficiency."
            }
          }
        ]
      }
    </script>

  <!-- Bootstrap + Fonts (same as original) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.css" />
  <link href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:wght@400;700&display=swap" rel="stylesheet" />

  <!-- Keep your existing styles (no visual changes) -->
  <style>
    /* (Paste your existing styles here exactly as before to keep design unchanged) */
    body {
      font-family: "Libre Baskerville", serif;
      background: #f8f9fa;
      color: #1a365d;
    }

    .page-header {
      background: linear-gradient(135deg, #1a2a80, #3b38a0);
      color: #fff;
      padding: 80px 0;
      text-align: center;
    }

    .page-header h1 {
      font-size: 3rem;
      font-weight: 700;
    }

    .product-detail {
      padding: 60px 0;
    }

    .product-detail .image-box {
      background: #fff;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.1);
      text-align: center;
    }

    .product-detail .image-box img {
      max-width: 100%;
      height: auto;
      border-radius: 8px;
    }

    .product-detail h2 {
      font-size: 2rem;
      font-weight: 700;
      margin-bottom: 20px;
    }

    .product-detail p {
      color: #4a5568;
      line-height: 1.6;
    }

    .spec-table {
      margin-top: 30px;
    }

    .spec-table table {
      width: 100%;
      border-collapse: collapse;
      background: #fff;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.08);
    }

    .spec-table th,
    .spec-table td {
      padding: 14px 20px;
      border-bottom: 1px solid #e2e8f0;
    }

    .spec-table th {
      background: #3b38a0;
      color: #fff;
      text-align: left;
    }

    .action-buttons {
      margin-top: 30px;
      display: flex;
      gap: 20px;
    }

    .btn-primary {
      background: linear-gradient(135deg, #4fd1c7, #38b2ac);
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      font-weight: 600;
      color: #fff;
      transition: 0.3s;
    }

    .btn-primary:hover {
      background: linear-gradient(135deg, #38b2ac, #2c7a7b);
    }

    .btn-secondary {
      background: transparent;
      border: 2px solid #4fd1c7;
      color: #4fd1c7;
      padding: 12px 24px;
      border-radius: 8px;
      font-weight: 600;
      transition: 0.3s;
      text-decoration: none;
    }

    .btn-secondary:hover {
      background: #4fd1c7;
      color: #fff;
    }

    .applications {
      margin-top: 50px;
    }

    .applications h3 {
      margin-bottom: 20px;
      font-weight: 700;
    }

    .applications ul {
      list-style: none;
      padding: 0;
    }

    .applications li {
      padding: 10px 0;
      border-bottom: 1px solid #e2e8f0;
      color: #4a5568;
    }

    .available-grades {
      font-size: 1.1rem;
      margin-top: 10px;
      color: rgba(255, 255, 255, 0.9);
    }

    .nav-tabs-wrapper {
      margin-top: 40px;
    }

    .nav-tabs {
      justify-content: center;
      border-bottom: 2px solid #3b38a0;
    }

    .nav-link {
      border: none;
      border-radius: 0;
      padding: 15px 30px;
      font-weight: 500;
      color: #1a365d;
      transition: 0.3s;
    }

    .nav-link:hover {
      color: #3b38a0;
    }

    .nav-link.active {
      color: #fff;
      background: #3b38a0;
      border-radius: 8px 8px 0 0;
    }

    .tab-content {
      background: #fff;
      padding: 30px;
      border-radius: 0 0 8px 8px;
      box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.1);
    }

    #comparison-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 30px;
    }

    #comparison-table th,
    #comparison-table td {
      padding: 12px 15px;
      border: 1px solid #e2e8f0;
      text-align: center;
    }

    #comparison-table th {
      background: #3b38a0;
      color: #fff;
      font-weight: 600;
    }

    .grade-col {
      font-weight: 500;
      color: #1a365d;
      transition: background 0.3s, color 0.3s;
    }

    .grade-col.active-col {
      background: #3b38a0 !important;
      color: #fff !important;
    }

    .col-40 {
      background: #edf2f7;
    }

    .col-50 {
      background: #f7fafc;
    }

    .col-60 {
      background: #fff5f5;
    }

    .col-80 {
      background: #e6fffa;
    }

    /* FAQ Section */
    .faq-section {
      padding: 80px 0;
      background: #f8f9fa;
      margin-top: 50px;
    }

    .faq-container {
      max-width: 900px;
      margin: 0 auto;
    }

    .faq-item {
      background: white;
      border-radius: 12px;
      margin-bottom: 20px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
      overflow: hidden;
      transition: transform 0.3s ease;
    }

    .faq-item:hover {
      transform: translateY(-3px);
    }

    .faq-question {
      padding: 25px 30px;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: white;
      transition: background 0.3s ease;
      font-weight: 600;
      color: #1a365d;
      font-size: 1.1rem;
    }

    .faq-question:hover {
      background: #f8f9fa;
    }

    .faq-question i {
      font-size: 1.3rem;
      transition: transform 0.3s ease;
      color: #4fd1c7;
    }

    .faq-item.active .faq-question i {
      transform: rotate(180deg);
    }

    .faq-answer {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.4s ease, padding 0.4s ease;
      padding: 0 30px;
      color: #4a5568;
      line-height: 1.8;
    }

    .faq-item.active .faq-answer {
      max-height: 500px;
      padding: 0 30px 25px;
    }

    /* Responsive Design for FAQs */
    @media (max-width: 768px) {
      .faq-section {
        padding: 60px 0;
      }

      .faq-question {
        padding: 18px 20px;
        font-size: 1rem;
      }

      .faq-answer {
        padding: 0 20px;
        font-size: 0.95rem;
      }

      .faq-item.active .faq-answer {
        padding: 0 20px 18px;
      }

      .faq-question i {
        font-size: 1.1rem;
      }
    }

    @media (max-width: 480px) {
      .faq-section {
        padding: 50px 0;
      }

      .faq-item {
        margin-bottom: 15px;
      }

      .faq-question {
        padding: 15px;
        font-size: 0.95rem;
      }

      .faq-answer {
        padding: 0 15px;
        font-size: 0.9rem;
      }

      .faq-item.active .faq-answer {
        padding: 0 15px 15px;
      }
    }
  </style>
</head>

<body>
  <!-- Header -->
  <header>{% include 'navbar.html' %}</header>

  <!-- Page Header -->
  <section class="page-header">
    <div class="container">
      <h1>{{ product.name }}</h1>
      <p>
        Efficient hydrogen sulfide scavenger for oil & gas industry
        applications
      </p>
      <p class="available-grades">
        Also available in: 40%, 50%, and 60% grades
      </p>
    </div>
  </section>
  <div class="container mt-3">
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="/">Home</a></li>
        <li class="breadcrumb-item"><a href="/products">Products</a></li>
        <li class="breadcrumb-item active" aria-current="page">
          {{ product.name }}
        </li>
      </ol>
    </nav>
  </div>
  <!-- Product Details -->
  <section class="product-detail" id="product-detail">
    <div class="container">
      <div class="row g-5">
        <!-- Product Image -->
        <div class="col-md-5">
          <div class="image-box">
            {% if product.image_url %}
            <img src="{{ product.image_url }}" alt="{{ product.name }}" class="product-image img-fluid" />
            {% else %}
            <img src="/static/images/placeholder.png" alt="{{ product.name }}" class="product-image img-fluid" />
            {% endif %}
          </div>
        </div>

        <!-- Product Info -->
        <div class="col-md-7">
          <h2>{{ product.name }}</h2>
          <p>{{ product.short_description }}</p>

          <ul>
            <li>
              Effective hydrogen sulfide removal from natural gas and crude
              oil
            </li>
            <li>Non-corrosive, high-purity triazine-based scavenger</li>
            <li>Proven efficiency in oilfield and refinery gas treatment</li>
            <li>Available in 40%, 50%, 60%, and 80% concentrations</li>
          </ul>

          <!-- Specification Table -->
          {% if product.specs %}
          <div class="spec-table" id="specifications">
            <table>
              <tr>
                <th>Parameter</th>
                <th>Specification</th>
              </tr>
              {% for key, value in product.specs.items %}
              <tr>
                <td>{{ key }}</td>
                <td>{{ value }}</td>
              </tr>
              {% endfor %}
            </table>
          </div>
          {% endif %}

          <!-- Action Buttons -->

          {% if product.has_downloads %}
          <div class="action-buttons">
            <a href="/#contact" class="btn-secondary">Request For Quotation</a>
            {% if product.coa_pdf %}
            <a href="{{ product.coa_pdf.url }}" class="btn btn-outline-success download-btn" download>
              <i class="bi bi-file-pdf-fill"></i> Certificate of Analysis
              (COA)
            </a>
            {% endif %} {% if product.tds_pdf %}
            <a href="{{ product.tds_pdf.url }}" class="btn btn-outline-success download-btn" download>
              <i class="bi bi-file-pdf-fill"></i> Technical Data Sheet (TDS)
            </a>
            {% endif %}
          </div>
          {% endif %}
        </div>
      </div>

      <!-- Grade Tabs (unchanged) -->
      {% if product.slug == 'mea-triazine-78-h2s-scavenger' %}
      <div class="nav-tabs-wrapper">
        <ul class="nav nav-tabs" role="tablist">
          <li class="nav-item">
            <a class="nav-link active" data-bs-toggle="tab" href="#grade40">40% Grade</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" data-bs-toggle="tab" href="#grade50">50% Grade</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" data-bs-toggle="tab" href="#grade60">60% Grade</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" data-bs-toggle="tab" href="#grade80">80% Grade</a>
          </li>
        </ul>
        <div class="tab-content">
          <!-- 40% -->
          <div class="tab-pane fade show active" id="grade40" role="tabpanel">
            <div class="spec-table">
              <table>
                <tr>
                  <th>Specification</th>
                  <th>Details</th>
                </tr>
                <tr>
                  <td>Chemical Name</td>
                  <td>MEA Triazine</td>
                </tr>
                <tr>
                  <td>Purity</td>
                  <td>40%</td>
                </tr>
                <tr>
                  <td>Appearance</td>
                  <td>Pale yellow to light brown liquid</td>
                </tr>
                <tr>
                  <td>Density (25°C)</td>
                  <td>1.05 – 1.10 g/cm³</td>
                </tr>
                <tr>
                  <td>Viscosity</td>
                  <td>Low (easy to handle)</td>
                </tr>
                <tr>
                  <td>Packaging</td>
                  <td>200L HDPE Drums / IBC Tank</td>
                </tr>
                <tr>
                  <td>Application</td>
                  <td>General H2S scavenging in light hydrocarbon streams</td>
                </tr>
              </table>
            </div>
            <div class="action-buttons">
              <a href="{% static 'media/VCP-040-TDS.pdf' %}" class="btn-secondary" download>Download TDS</a>
              <a href="{% static 'media/VCP-040-COA.pdf' %}" class="btn-secondary" download>Download COA</a>
            </div>
          </div>

          <!-- 50% -->
          <div class="tab-pane fade" id="grade50" role="tabpanel">
            <div class="spec-table">
              <table>
                <tr>
                  <th>Specification</th>
                  <th>Details</th>
                </tr>
                <tr>
                  <td>Chemical Name</td>
                  <td>MEA Triazine</td>
                </tr>
                <tr>
                  <td>Purity</td>
                  <td>50%</td>
                </tr>
                <tr>
                  <td>Appearance</td>
                  <td>Clear to pale yellow liquid</td>
                </tr>
                <tr>
                  <td>Density (25°C)</td>
                  <td>1.07 – 1.12 g/cm³</td>
                </tr>
                <tr>
                  <td>Viscosity</td>
                  <td>Moderate (balanced handling)</td>
                </tr>
                <tr>
                  <td>Packaging</td>
                  <td>200L HDPE Drums / IBC Tank</td>
                </tr>
                <tr>
                  <td>Application</td>
                  <td>
                    Suitable for moderate H2S levels in natural gas & crude
                  </td>
                </tr>
              </table>
            </div>
            <div class="action-buttons">
              <a href="{% static 'media/VCP-050-TDS.pdf' %}" class="btn-secondary" download>Download TDS</a>
              <a href="{% static 'media/VCP-050-COA.pdf' %}" class="btn-secondary" download>Download COA</a>
            </div>
          </div>

          <!-- 60% -->
          <div class="tab-pane fade" id="grade60" role="tabpanel">
            <div class="spec-table">
              <table>
                <tr>
                  <th>Specification</th>
                  <th>Details</th>
                </tr>
                <tr>
                  <td>Chemical Name</td>
                  <td>MEA Triazine</td>
                </tr>
                <tr>
                  <td>Purity</td>
                  <td>60%</td>
                </tr>
                <tr>
                  <td>Appearance</td>
                  <td>Clear yellow liquid</td>
                </tr>
                <tr>
                  <td>Density (25°C)</td>
                  <td>1.10 – 1.14 g/cm³</td>
                </tr>
                <tr>
                  <td>Viscosity</td>
                  <td>Medium-High</td>
                </tr>
                <tr>
                  <td>Storage Stability</td>
                  <td>Excellent – longer shelf life</td>
                </tr>
                <tr>
                  <td>Application</td>
                  <td>Heavy-duty scavenging for higher H2S concentrations</td>
                </tr>
              </table>
            </div>
            <div class="action-buttons">
              <a href="{% static 'media/VCP-060-TDS.pdf' %}" class="btn-secondary" download>Download TDS</a>
              <a href="{% static 'media/VCP-060-COA.pdf' %}" class="btn-secondary" download>Download COA</a>
            </div>
          </div>

          <!-- 80% -->
          <div class="tab-pane fade" id="grade80" role="tabpanel">
            <div class="spec-table">
              <table>
                <tr>
                  <th>Specification</th>
                  <th>Details</th>
                </tr>
                <tr>
                  <td>Chemical Name</td>
                  <td>MEA Triazine</td>
                </tr>
                <tr>
                  <td>Purity</td>
                  <td>80%</td>
                </tr>
                <tr>
                  <td>Appearance</td>
                  <td>Clear, viscous liquid</td>
                </tr>
                <tr>
                  <td>Density (25°C)</td>
                  <td>1.14 – 1.18 g/cm³</td>
                </tr>
                <tr>
                  <td>Viscosity</td>
                  <td>High (more concentrated)</td>
                </tr>
                <tr>
                  <td>Storage Stability</td>
                  <td>Excellent – recommended for export</td>
                </tr>
                <tr>
                  <td>Application</td>
                  <td>High-strength scavenger for severe H2S environments</td>
                </tr>
              </table>
            </div>
            <div class="action-buttons">
              <a href="{% static 'media/VCP-003-TDS.pdf' %}" class="btn-secondary" download>Download TDS</a>
              <a href="{% static 'media/VCP-080-COA.pdf' %}" class="btn-secondary" download>Download COA</a>
            </div>
          </div>
        </div>
      </div>
      {% else %}
      {% endif %}

      <!-- Comparison Table -->
      {% if product.slug == 'mea-triazine-78-h2s-scavenger' %}
      <div class="spec-table" id="comparison-table-wrapper">
        <table id="comparison-table">
          <tr>
            <th>Specification</th>
            <th class="grade-col col-40">40%</th>
            <th class="grade-col col-50">50%</th>
            <th class="grade-col col-60">60%</th>
            <th class="grade-col col-80">80%</th>
          </tr>
          <tr>
            <td>Chemical Name</td>
            <td class="grade-col col-40">MEA Triazine</td>
            <td class="grade-col col-50">MEA Triazine</td>
            <td class="grade-col col-60">MEA Triazine</td>
            <td class="grade-col col-80">MEA Triazine</td>
          </tr>
          <tr>
            <td>Purity</td>
            <td class="grade-col col-40">40%</td>
            <td class="grade-col col-50">50%</td>
            <td class="grade-col col-60">60%</td>
            <td class="grade-col col-80">80%</td>
          </tr>
          <tr>
            <td>Appearance</td>
            <td class="grade-col col-40">
              Pale yellow to light brown liquid
            </td>
            <td class="grade-col col-50">Clear to pale yellow liquid</td>
            <td class="grade-col col-60">Clear yellow liquid</td>
            <td class="grade-col col-80">Clear, viscous liquid</td>
          </tr>
          <tr>
            <td>Density (25°C)</td>
            <td class="grade-col col-40">1.05 – 1.10 g/cm³</td>
            <td class="grade-col col-50">1.07 – 1.12 g/cm³</td>
            <td class="grade-col col-60">1.10 – 1.14 g/cm³</td>
            <td class="grade-col col-80">1.14 – 1.18 g/cm³</td>
          </tr>
          <tr>
            <td>Viscosity</td>
            <td class="grade-col col-40">Low (easy to handle)</td>
            <td class="grade-col col-50">Moderate (balanced handling)</td>
            <td class="grade-col col-60">Medium-High</td>
            <td class="grade-col col-80">High (more concentrated)</td>
          </tr>
          <tr>
            <td>Storage Stability</td>
            <td class="grade-col col-40"></td>
            <td class="grade-col col-50"></td>
            <td class="grade-col col-60">Excellent – longer shelf life</td>
            <td class="grade-col col-80">
              Excellent – recommended for export
            </td>
          </tr>
          <tr>
            <td>Application</td>
            <td class="grade-col col-40">
              General H2S scavenging in light hydrocarbon streams
            </td>
            <td class="grade-col col-50">
              Suitable for moderate H2S levels in natural gas & crude
            </td>
            <td class="grade-col col-60">
              Heavy-duty scavenging for higher H2S concentrations
            </td>
            <td class="grade-col col-80">
              High-strength scavenger for severe H2S environments
            </td>
          </tr>
        </table>
      </div>
      {% else %}
      {% endif %}



      <!-- {% for pro in prod %} {% if product.image_url %}
        <div style="width: 100%; max-width: 800px; margin: 0 auto" class="mt-5">
          <iframe
            id="meaVideo"
            width="100%"
            height="480"
            src="https://www.youtube.com/embed/whNRqaPR6kY?controls=0&showinfo=0&rel=0&modestbranding=1&loop=1&playlist=whNRqaPR6kY&iv_load_policy=3"
            title="Product Video"
            frameborder="0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
            referrerpolicy="strict-origin-when-cross-origin"
            allowfullscreen
            style="border-radius: 8px"
          ></iframe>
        </div>
        {% endif %} {% endfor %} -->

      <!-- Applications Section -->
      <div class="applications mt-5" id="applications">
        <h3>Applications of {{ product.name }}</h3>
        {% if applications %}
        <ul>
          {% for app in applications %}
          <!-- Access the title property of the current 'app' object in the loop -->
          <li>
            <strong>{{ app.title }}</strong>
            {% if app.description %}
            <p>{{ app.description|linebreaksbr }}</p>
            {% endif %}
          </li>
          {% endfor %}
        </ul>
        {% else %}
        <p>
          No specific application details are currently available for this
          product.
        </p>
        {% endif %}
      </div>

      <section class="faq-section" id="faq">
        <div class="container">
          <h2 class="section-title">Frequently Asked Questions About {{ product.name }}</h2>
          <div class="faq-container">
            {% if faqs %}
            {% for faq in faqs %}
            <div class="faq-item">
              <div class="faq-question">
                <span>{{ faq.question }}</span>
                <i class="bi bi-chevron-down"></i>
              </div>
              <div class="faq-answer">{{ faq.answer }}</div>
            </div>
            {% endfor %}
            {% else %}
            <p>No FAQs are currently available for this product.</p>
            {% endif %}
          </div>
        </div>
      </section>
    </div>
  </section>

  <!-- Footer -->
  {% include 'footer.html' %}

  <!-- JS: existing behavior kept; email modal + countdown -->
  <script>
    // Sync tab and comparison table column
    document.addEventListener("DOMContentLoaded", function () {
      function setActiveCol(grade) {
        // Remove all highlights
        document.querySelectorAll(".grade-col").forEach(function (el) {
          el.classList.remove("active-col");
        });
        // Highlight selected column
        document.querySelectorAll(".col-" + grade).forEach(function (el) {
          el.classList.add("active-col");
        });
      }

      // Initial highlight (40%)
      setActiveCol("40");

      // Listen for tab clicks
      document.querySelectorAll(".nav-link").forEach(function (tab) {
        tab.addEventListener("shown.bs.tab", function (e) {
          const href = tab.getAttribute("href");
          if (href.includes("40")) setActiveCol("40");
          else if (href.includes("50")) setActiveCol("50");
          else if (href.includes("60")) setActiveCol("60");
          else if (href.includes("80")) setActiveCol("80");
        });
      });
    });
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Email Popup Modal (unchanged design; behavior posts to /submit-email/ and then downloads) -->
  <div class="modal fade" id="downloadModal" tabindex="-1" aria-labelledby="downloadModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content p-3">
        <div class="modal-header">
          <h5 class="modal-title" id="downloadModalLabel">
            Enter Email to Download
          </h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form id="emailForm">
            <input type="hidden" id="fileUrl" value="" />
            <div class="mb-3">
              <label for="emailInput" class="form-label">Email address</label>
              <input type="email" class="form-control" id="emailInput" placeholder="your@company.com" required />
            </div>
            <div class="d-flex justify-content-between">
              <button type="submit" class="btn btn-primary">
                Submit & Download
              </button>
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                Cancel
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Countdown Modal -->
  <div class="modal fade" id="countdownModal" tabindex="-1" aria-labelledby="countdownModalLabel" aria-hidden="true"
    data-bs-backdrop="static" data-bs-keyboard="false">
    <div class="modal-dialog modal-dialog-centered modal-sm">
      <div class="modal-content p-4 text-center">
        <div class="modal-body">
          <div class="spinner-border text-primary mb-3" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
          <h5 class="mb-3">Preparing Your Download</h5>
          <p class="mb-2">File will download in</p>
          <h2 class="text-primary mb-0" id="countdown">3</h2>
          <small class="text-muted">seconds</small>
        </div>
      </div>
    </div>
  </div>

  <style>
    /* Countdown Modal Styling - keep as is */
    #countdownModal .modal-content {
      border: none;
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    }

    #countdownModal .spinner-border {
      width: 3rem;
      height: 3rem;
    }

    #countdown {
      font-size: 3rem;
      font-weight: bold;
      color: #3b38a0;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    #countdownModal .modal-body {
      padding: 2rem;
    }
  </style>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const video = document.getElementById("meaVideo");

      // Create an intersection observer
      const observer = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              video.play(); // Play when visible
            } else {
              video.pause(); // Pause when not visible
            }
          });
        },
        {
          threshold: 0.5, // Play when at least 50% visible
        }
      );

      observer.observe(video);
    });
    document.addEventListener("DOMContentLoaded", function () {
      const faqItems = document.querySelectorAll(".faq-item");

      faqItems.forEach((item) => {
        const question = item.querySelector(".faq-question");
        question.addEventListener("click", () => {
          // Close other FAQ items
          faqItems.forEach((otherItem) => {
            if (otherItem !== item) {
              otherItem.classList.remove("active");
            }
          });
          // Toggle current FAQ item
          item.classList.toggle("active");
        });
      });
    });
    document.addEventListener("DOMContentLoaded", function () {
      const downloadModalEl = document.getElementById("downloadModal");
      const downloadModal = new bootstrap.Modal(downloadModalEl);
      const countdownModal = new bootstrap.Modal(
        document.getElementById("countdownModal")
      );
      const emailForm = document.getElementById("emailForm");
      const emailInput = document.getElementById("emailInput");
      const fileUrlField = document.getElementById("fileUrl");
      const countdownElement = document.getElementById("countdown");

      // Open modal on button click
      document.querySelectorAll(".download-btn").forEach((btn) => {
        btn.addEventListener("click", function () {
          const fileUrl = this.getAttribute("data-file");
          fileUrlField.value = fileUrl;
          emailInput.value = ""; // reset input
          downloadModal.show();
        });
      });

      // Countdown function
      function startCountdown(fileUrl) {
        let timeLeft = 3;
        countdownElement.textContent = timeLeft;
        countdownModal.show();

        const timer = setInterval(() => {
          timeLeft--;
          countdownElement.textContent = timeLeft;

          if (timeLeft <= 0) {
            clearInterval(timer);

            // Trigger file download
            const link = document.createElement("a");
            link.href = fileUrl;
            link.download = fileUrl.split("/").pop();
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);

            // Close countdown modal
            countdownModal.hide();
          }
        }, 1000);
      }

      // Handle form submit
      emailForm.addEventListener("submit", function (e) {
        e.preventDefault();
        const email = emailInput.value.trim();
        const fileUrl = fileUrlField.value;

        // Simple email validation
        if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
          alert("Please enter a valid email address.");
          return;
        }

        // Show loading state
        const submitBtn = emailForm.querySelector('button[type="submit"]');
        const originalText = submitBtn.textContent;
        submitBtn.textContent = "Saving...";
        submitBtn.disabled = true;

        // Send email to backend (POST JSON). Endpoint: /submit-email/
        fetch("/submit-email/", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "X-Requested-With": "XMLHttpRequest",
          },
          body: JSON.stringify({
            email: email,
            file_url: fileUrl,
            page: window.location.href,
          }),
        })
          .then((response) => {
            // close modal and start download countdown whether success or not,
            // but if server returns error (non-2xx), we still proceed — adjust if you want different behavior
            downloadModal.hide();
            startCountdown(fileUrl);
            return response.json().catch(() => ({}));
          })
          .then((data) => {
            // optional: log server response in console
            console.log("Server response (if any):", data);
          })
          .catch((error) => {
            console.error("Error saving email:", error);
            // proceed with download even on network error
            downloadModal.hide();
            startCountdown(fileUrl);
          })
          .finally(() => {
            // Reset button state
            submitBtn.textContent = originalText;
            submitBtn.disabled = false;
          });
      });
    });
  </script>
</body>

</html>